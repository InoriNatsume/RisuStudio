# RisuStudio ìµœì¢… ì‚¬ì–‘ì„œ

---

## ï¿½ ì§„í–‰ í˜„í™©

> **ê°œë°œ ì§„í–‰ ìƒí™©ì€ [RisuStudio_Progress.md](RisuStudio_Progress.md)ì—ì„œ í™•ì¸í•˜ì„¸ìš”.**
> 
> - í˜„ì¬ ë‹¨ê³„, ì™„ë£Œëœ ì‘ì—…, ë‹¤ìŒ í•  ì¼
> - Phaseë³„ ìƒì„¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
> - ì•Œë ¤ì§„ ì´ìŠˆ ë° ì‘ì—… ë¡œê·¸

---

## ï¿½ğŸ“š ë¬¸ì„œ ì°¸ì¡° ê°€ì´ë“œ

> **ì´ ì„¹ì…˜ì€ í”„ë¡œì íŠ¸ì—ì„œ ì°¸ê³ í•  ë¬¸ì„œë“¤ê³¼ ê·¸ ì—­í• ì„ ì •ë¦¬í•©ë‹ˆë‹¤.**

### í´ë” êµ¬ì¡°

```
ìƒˆ í´ë” (9)/
â”œâ”€â”€ RisuStudio_Specification.md    â† ë©”ì¸ ì„¤ê³„ ë¬¸ì„œ (ì´ ë¬¸ì„œ)
â”œâ”€â”€ RisuStudio_Progress.md         â† ê°œë°œ ì§„í–‰ í˜„í™© ì²´í¬ë¦¬ìŠ¤íŠ¸
â”œâ”€â”€ RisuAI_Format_Specification.md â† íŒŒì¼ í¬ë§· ì‚¬ì–‘ì„œ (â˜… í•µì‹¬)
â”œâ”€â”€ risustudio/                    â† í”„ë¡œì íŠ¸ ì†ŒìŠ¤ ì½”ë“œ
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ lib/core/              â† ì½”ì–´ íŒŒì„œ/íƒ€ì…/ë¡œê±°
â”‚   â”‚   â””â”€â”€ routes/                â† SvelteKit í˜ì´ì§€
â”‚   â”œâ”€â”€ scripts/                   â† CLI ë„êµ¬ (extract.ts)
â”‚   â””â”€â”€ tests/                     â† Vitest í…ŒìŠ¤íŠ¸
â”‚
â””â”€â”€ reference/                     â† ì°¸ì¡° ë¬¸ì„œ ë° ì½”ë“œ (ê°œë°œ ì™„ë£Œ í›„ ì‚­ì œ ê°€ëŠ¥)
    â”œâ”€â”€ charx_cherrypick.md               (ìºë¦­í„° ì¹´ë“œ ìƒì„¸)
    â”œâ”€â”€ risum_cherrypick.md               (.risum ìƒì„¸)
    â”œâ”€â”€ risup_cherrypick.md               (.risup ìƒì„¸)
    â”œâ”€â”€ ModuleManager_Analysis.md         (UI íŒ¨í„´ ë¶„ì„)
    â”œâ”€â”€ module-manager-v3_2.0.6.js        (ê²€ì¦ ìŠ¤í‚¤ë§ˆ ì°¸ì¡°)
    â”œâ”€â”€ OrganizeGod_v3.js                 (ë°ì´í„° ê´€ë¦¬ UI)
    â”œâ”€â”€ AssetGod_v3.js                    (ì—ì…‹ ê´€ë¦¬ UI)
    â”œâ”€â”€ PresetManager1.4.js               (í”„ë¦¬ì…‹ ê´€ë¦¬ UI)
    â”œâ”€â”€ EXIF_Extraction_Comparison.md     (AI ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„°)
    â”œâ”€â”€ RisuAI-Interface-Generation-1.0.2/ (ì‹œë®¬ë ˆì´í„° ì°¸ì¡°)
    â”œâ”€â”€ RisuExtractUtil-master/           (Node.js ì¶”ì¶œ ìœ í‹¸)
    â”œâ”€â”€ Risuai-2026.1.184/                (RisuAI ì›ë³¸ ì†ŒìŠ¤)
    â””â”€â”€ cbs-extension-1.5.0/              (CBS VSCode í™•ì¥)
```

### ì°¸ì¡° ë¬¸ì„œ ìƒì„¸

| ê²½ë¡œ | ìš©ë„ |
|------|------|
| `RisuAI_Format_Specification.md` | **íŒŒì¼ í¬ë§· ì‚¬ì–‘ì„œ** (ë£¨íŠ¸) |
| `reference/module-manager-v3_2.0.6.js` | MODULE_SCHEMA, validateModule() íŒ¨í„´ |
| `reference/OrganizeGod_v3.js` | ì±„íŒ…/ë¡œì–´ë¶/ì •ê·œì‹ CRUD UI íŒ¨í„´ |
| `reference/Risuai-2026.1.184/src/ts/process/cbs.ts` | CBS ëŸ°íƒ€ì„ ëª…ë ¹ì–´ êµ¬í˜„ |
| `reference/Risuai-2026.1.184/src/ts/process/triggers.ts` | Trigger V2 ì—”ì§„ |
| `reference/RisuExtractUtil-master/src/preset.ts` | NAI/ST í”„ë¦¬ì…‹ ë³€í™˜ ë¡œì§ |

### êµ¬í˜„ ì‹œ ì°¸ì¡° ìˆœì„œ

| ë‹¨ê³„ | ì°¸ì¡° ë¬¸ì„œ | ìš©ë„ |
|------|----------|------|
| **1. íŒŒì¼ íŒŒì‹±** | `RisuAI_Format_Specification.md` | íŒŒì¼ í¬ë§· ì‚¬ì–‘, íŒŒì„œ êµ¬í˜„ ì½”ë“œ |
| **2. UI êµ¬ì¡°** | `reference/ModuleManager_Analysis.md` + ì›ë³¸ JS | ì»´í¬ë„ŒíŠ¸ íŒ¨í„´ ì°¸ì¡° |
| **3. CBS ëŸ°íƒ€ì„** | `reference/Risuai-2026.1.184/src/ts/process/cbs.ts` | ëª…ë ¹ì–´ êµ¬í˜„ ì¶”ì¶œ |
| **4. Trigger** | `reference/Risuai-2026.1.184/src/ts/process/triggers.ts` | V2 ë¡œì§ ì¶”ì¶œ |
| **5. ì‹œë®¬ë ˆì´í„°** | `reference/RisuAI-Interface-Generation-1.0.2/` | Regex ë””ë²„ê±° íŒ¨í„´ |
| **6. í”„ë¦¬ì…‹ ë³€í™˜** | `reference/RisuExtractUtil-master/src/preset.ts` | NAI/ST ë³€í™˜ ë¡œì§ |
| **7. ì—ì…‹ ë·°ì–´** | `reference/EXIF_Extraction_Comparison.md` | ìŠ¤í…Œê°€ë…¸, ì •ê·œí™” ì „ëµ |

---

## íŒŒì¼ í¬ë§·

> **ìƒì„¸ ì‚¬ì–‘ì€ [RisuAI_Format_Specification.md](RisuAI_Format_Specification.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.**

íŒŒì¼ í¬ë§·ì˜ ë°”ì´ë„ˆë¦¬ êµ¬ì¡°, íŒŒì‹± ì²´ì¸, êµ¬í˜„ ì½”ë“œ, ì—ì…‹ ì²˜ë¦¬ ì „ëµ ë“± ëª¨ë“  ìƒì„¸ ë‚´ìš©ì€ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ ì‚¬ì–‘ ë¬¸ì„œì— ì •ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### ì§€ì› íŒŒì¼ ìš”ì•½

| í¬ë§· | í™•ì¥ì | ì„¤ëª… |
|------|--------|------|
| **ìºë¦­í„° ì¹´ë“œ** | `.charx` | ZIP ì•„ì¹´ì´ë¸Œ í˜•ì‹ |
| **ìºë¦­í„° ì¹´ë“œ** | `.jpg/.jpeg` | CharX-JPEG (JPEG + ZIP) |
| **ìºë¦­í„° ì¹´ë“œ** | `.png` | PNG tEXt ì²­í¬ |
| **ëª¨ë“ˆ** | `.risum` | RPack ì••ì¶• ë°”ì´ë„ˆë¦¬ |
| **í”„ë¦¬ì…‹** | `.risup` | RPack + fflate + AES-GCM |
| **í”„ë¦¬ì…‹** | `.risupreset` | fflate + AES-GCM (ë ˆê±°ì‹œ) |

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ì •ì˜

**RisuStudio**ëŠ” RisuAI ìºë¦­í„° ì¹´ë“œ(.charx), ëª¨ë“ˆ(.risum), í”„ë¦¬ì…‹(.risup)ì„ ìœ„í•œ **í†µí•© ê°œë°œ ë° í…ŒìŠ¤íŠ¸ í™˜ê²½**ì…ë‹ˆë‹¤.

### 1.2 í•µì‹¬ ê°€ì¹˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  "RisuAI ì—†ì´ë„ ê°œë°œí•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” IDE"                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  1. íŒŒì¼ ì™„ì „ ì§€ì›                                                  â”‚
â”‚     â””â”€ .charx, .risum, .risup, .png ìºë¦­í„° ì¹´ë“œ íŒŒì‹±/ì €ì¥           â”‚
â”‚                                                                     â”‚
â”‚  2. í¸ì§‘ê¸° (ëª¨ë“ˆ ë§¤ë‹ˆì € ê¸°ëŠ¥ í†µí•©)                                  â”‚
â”‚     â””â”€ ë¡œì–´ë¶/Regex/Trigger í¸ì§‘ + CBS í•˜ì´ë¼ì´íŠ¸ + ìë™ì™„ì„±        â”‚
â”‚                                                                     â”‚
â”‚  3. ì‹œë®¬ë ˆì´í„° (í•µì‹¬ ì°¨ë³„ì , Interface-Generation í†µí•©)             â”‚
â”‚     â””â”€ CBS/Regex/Trigger(Lua)/HTML ì‹¤í–‰, ë³€ìˆ˜ í…ŒìŠ¤íŠ¸, ì‹¤í–‰ ì¶”ì      â”‚
â”‚                                                                     â”‚
â”‚  4. í†µí•© í…ŒìŠ¤íŠ¸                                                     â”‚
â”‚     â””â”€ í”„ë¦¬ì…‹+ìºë¦­í„°+ëª¨ë“ˆ ì¡°í•© ë¶„ì„ ë° ì‹œë®¬ë ˆì´ì…˜                   â”‚
â”‚                                                                     â”‚
â”‚  5. AI ì¹œí™”ì                                                        â”‚
â”‚     â””â”€ Copy for AIë¡œ ì»¨í…ìŠ¤íŠ¸ ì¤€ë¹„, ì™¸ë¶€ AI í™œìš©                    â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 ê¸°ìˆ  ìŠ¤íƒ

| í•­ëª© | ì„ íƒ | ì´ìœ  |
|------|------|------|
| í”„ë ˆì„ì›Œí¬ | Svelte 4 + TypeScript | RisuAIì™€ ë™ì¼, ê°€ë³ê³  ë°˜ì‘í˜• |
| ë¹Œë“œ ë„êµ¬ | Vite | ë¹ ë¥¸ ê°œë°œ, ê°„ë‹¨í•œ ì„¤ì • |
| ë°°í¬ | GitHub Pages | ë¬´ë£Œ, ì½”ë“œì™€ í†µí•© ê´€ë¦¬ |
| ì½”ë“œ ì—ë””í„° | CodeMirror 6 | ëª¨ë“ˆë§¤ë‹ˆì €ì™€ ë™ì¼, CBS í•˜ì´ë¼ì´íŠ¸ |
| íŒŒì¼ ì²˜ë¦¬ | fflate, msgpackr | ZIP/MsgPack ì²˜ë¦¬ |

---

## 2. í™”ë©´ êµ¬ì¡°

### 2.1 ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RisuStudio                                                          [Ã—]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“ í¸ì§‘] [ğŸ§ª ì‹œë®¬ë ˆì´í„°] [ğŸ”€ í†µí•© í…ŒìŠ¤íŠ¸] [âš™ï¸ ì„¤ì •]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                         (ê° íƒ­ë³„ ì „ì²´ í™”ë©´ ì½˜í…ì¸ )                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 í¸ì§‘ í™”ë©´

ëª¨ë“ˆë§¤ë‹ˆì € UIë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ì—¬ ìµìˆ™í•¨ê³¼ ê²€ì¦ëœ UX ì œê³µ.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ“ í¸ì§‘â—€] [ğŸ§ª ì‹œë®¬ë ˆì´í„°] [ğŸ”€ í†µí•©] [âš™ï¸]                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  íŒŒì¼: [MyChar.charx â–¼]  [ğŸ“‚ ì—´ê¸°] [ğŸ’¾ ì €ì¥] [ğŸ“¤ ë‚´ë³´ë‚´ê¸°]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ì •ë³´] [ë¡œì–´ë¶ (12)] [Regex (5)] [Trigger (3)] [ì—ì…‹] [ì„¤ì •]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                                                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚             â”‚  â”‚                                              â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  ë¶ë§ˆí¬     â”‚  â”‚  ì—ë””í„° (CodeMirror)                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  íŒ¨ë„       â”‚  â”‚                                              â”‚ â”‚    â”‚
â”‚  â”‚  â”‚             â”‚  â”‚  â€¢ CBS êµ¬ë¬¸ ê°•ì¡°                             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ í•­ëª© ëª©ë¡â”‚  â”‚  â€¢ ìë™ì™„ì„± (ì„ íƒì )                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ ê²€ìƒ‰     â”‚  â”‚  â€¢ ì¤„ë²ˆí˜¸                                    â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ í´ë”     â”‚  â”‚                                              â”‚ â”‚    â”‚
â”‚  â”‚  â”‚             â”‚  â”‚                                              â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚  Footer: [ğŸ§ª ì„ íƒ í•­ëª© í…ŒìŠ¤íŠ¸] [ğŸ” ì „ì²´ ê²€ìƒ‰] [ğŸ“‹ Copy for AI]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### íŒŒì¼ íƒ€ì…ë³„ íƒ­ êµ¬ì„±

| íŒŒì¼ íƒ€ì… | íƒ­ êµ¬ì„± |
|----------|---------|
| .charx (ìºë¦­í„°) | ì •ë³´, ë¡œì–´ë¶, Regex, Trigger, ì—ì…‹, ì„¤ì • |
| .risum (ëª¨ë“ˆ) | ì •ë³´, ë¡œì–´ë¶, Regex, Trigger, ë³€ìˆ˜, ì—ì…‹, ì„¤ì • |
| .risup (í”„ë¦¬ì…‹) | ì •ë³´, í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿, Regex, íŒŒë¼ë¯¸í„°(ì½ê¸°ì „ìš©) |

### 2.3 ì‹œë®¬ë ˆì´í„° í™”ë©´

CBS/Regex/HTML í…ŒìŠ¤íŠ¸ ì „ìš© í™”ë©´. Interface-Generation ê¸°ëŠ¥ í†µí•©.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ“ í¸ì§‘] [ğŸ§ª ì‹œë®¬ë ˆì´í„°â—€] [ğŸ”€ í†µí•©] [âš™ï¸]                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [CBS] [Regex] [Trigger] [HTML/CSS] [AI ìƒì„±]                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“Š ë³€ìˆ˜ íŒ¨ë„                      â”‚ ğŸ“ ì½”ë“œ ì…ë ¥                    â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚   â”‚
â”‚  â”‚ chatVar:                          â”‚ {{#when::{{getvar::hp}}::lt::30 â”‚   â”‚
â”‚  â”‚ â”œâ”€ hp: [75_____]  ğŸ”„              â”‚ }}                              â”‚   â”‚
â”‚  â”‚ â”œâ”€ max_hp: [100___]               â”‚   <span class="danger">         â”‚   â”‚
â”‚  â”‚ â””â”€ [+ ì¶”ê°€]                       â”‚     ìœ„í—˜! HP ë‚®ìŒ              â”‚   â”‚
â”‚  â”‚                                   â”‚   </span>                      â”‚   â”‚
â”‚  â”‚ globalVar:                        â”‚ {{/when}}                       â”‚   â”‚
â”‚  â”‚ â”œâ”€ toggle_dark: [1_]              â”‚ HP: {{getvar::hp}}/{{getvar::   â”‚   â”‚
â”‚  â”‚ â””â”€ [+ ì¶”ê°€]                       â”‚   max_hp}}                      â”‚   â”‚
â”‚  â”‚                                   â”‚                                 â”‚   â”‚
â”‚  â”‚ ì»¨í…ìŠ¤íŠ¸:                         â”‚ [â–¶ ì‹¤í–‰] [ğŸ”„ ë¦¬ì…‹]             â”‚   â”‚
â”‚  â”‚ â”œâ”€ {{char}}: [TestChar]           â”‚                                 â”‚   â”‚
â”‚  â”‚ â””â”€ {{user}}: [User___]            â”‚                                 â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ ğŸ“¤ ê²°ê³¼                           â”‚ ğŸ” ì‹¤í–‰ ì¶”ì                     â”‚   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€                             â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Step 1: getvar::hp â†’ "75"      â”‚   â”‚
â”‚  â”‚ â”‚                               â”‚ â”‚ Step 2: 75 < 30 â†’ false        â”‚   â”‚
â”‚  â”‚ â”‚ HP: 75/100                    â”‚ â”‚ Step 3: when ë¸”ë¡ ê±´ë„ˆëœ€ â­ï¸    â”‚   â”‚
â”‚  â”‚ â”‚                               â”‚ â”‚ Step 4: getvar::hp â†’ "75"      â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ ì™„ë£Œ âœ…                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [ğŸ“‹ Copy for AI] [ğŸ“¤ VS Code] [ğŸ“ í¸ì§‘ê¸°ë¡œ ë³µì‚¬] [ğŸ’¾ ìŠ¤ë‹ˆí« ì €ì¥]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì‹œë®¬ë ˆì´í„° ì„œë¸Œíƒ­

| íƒ­ | ê¸°ëŠ¥ |
|----|------|
| CBS | CBS êµ¬ë¬¸ ì‹¤í–‰, ë³€ìˆ˜ ì¡°ì‘, ì‹¤í–‰ ì¶”ì  |
| Regex | Regex IN/OUT í…ŒìŠ¤íŠ¸, ì ì§„ì  ë””ë²„ê¹… (Interface-Generation) |
| Trigger | Trigger V2/Lua ì‹¤í–‰, ì¡°ê±´ í‰ê°€, ì±„íŒ… ì‹œë®¬ë ˆì´ì…˜ |
| HTML/CSS | HTML ë¯¸ë¦¬ë³´ê¸°, CSS í¸ì§‘, CBS ë Œë”ë§ |
| AI ìƒì„± | Gemini APIë¡œ ì½”ë“œ ìë™ ìƒì„± |

### 2.4 í†µí•© í…ŒìŠ¤íŠ¸ í™”ë©´

ì—¬ëŸ¬ íŒŒì¼(í”„ë¦¬ì…‹+ìºë¦­í„°+ëª¨ë“ˆ) ì¡°í•© ë¶„ì„ ë° ì‹œë®¬ë ˆì´ì…˜.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ“ í¸ì§‘] [ğŸ§ª ì‹œë®¬ë ˆì´í„°] [ğŸ”€ í†µí•©â—€] [âš™ï¸]                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ ë¡œë“œëœ íŒŒì¼:                                                            â”‚
â”‚  â”œâ”€ ğŸ­ MyChar.charx              Regex: 5, Trigger: 3      [ë³€ê²½] [Ã—]      â”‚
â”‚  â”œâ”€ ğŸ“ RoleplayPreset.risup      Regex: 2                  [ë³€ê²½] [Ã—]      â”‚
â”‚  â”œâ”€ ğŸ“¦ StatusModule.risum        Regex: 3, Trigger: 2      [ë³€ê²½] [Ã—]      â”‚
â”‚  â””â”€ [+ íŒŒì¼ ì¶”ê°€]                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Regex ì²´ì¸] [Trigger ëª©ë¡] [ë³€ìˆ˜ ì¶©ëŒ] [í”„ë¡¬í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸°]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ“‹ í†µí•© Regex ì²´ì¸ (ì ìš© ìˆœì„œ)                                       â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚  â”‚
â”‚  â”‚  #   ì†ŒìŠ¤        ì´ë¦„              íŒ¨í„´                  íƒ€ì…         â”‚  â”‚
â”‚  â”‚  â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  1   ğŸ“ í”„ë¦¬ì…‹   HP í‘œì‹œ           \[HP:(\d+)\]          display     â”‚  â”‚
â”‚  â”‚  2   ğŸ“ í”„ë¦¬ì…‹   ìƒíƒœ í¬ë§·         \[ST:(.*?)\]          display     â”‚  â”‚
â”‚  â”‚  3   ğŸ­ ìºë¦­í„°   ê°ì • íƒœê·¸         \[EMO:(.*?)\]         output      â”‚  â”‚
â”‚  â”‚  4   ğŸ­ ìºë¦­í„°   ì•¡ì…˜ í¬ë§·         \*(.+?)\*             display     â”‚  â”‚
â”‚  â”‚  5   ğŸ“¦ Status   ìƒíƒœë°”            \[STATUS\]            display     â”‚  â”‚
â”‚  â”‚  6   ğŸ“¦ Status   HP ìƒ‰ìƒ           ...                   display     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  âš ï¸ ì¶©ëŒ ê²½ê³ : #1ê³¼ #5ê°€ ìœ ì‚¬í•œ íŒ¨í„´ ì‚¬ìš©                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  í…ŒìŠ¤íŠ¸: [ì…ë ¥ í…ìŠ¤íŠ¸...                    ] [â–¶ ì²´ì¸ ì‹¤í–‰]                â”‚
â”‚                                                                             â”‚
â”‚  [ğŸ“‹ ë¶„ì„ ê²°ê³¼ Copy for AI] [ğŸ“¤ ë¦¬í¬íŠ¸ ë‚´ë³´ë‚´ê¸°]                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.5 ì„¤ì • í™”ë©´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ“ í¸ì§‘] [ğŸ§ª ì‹œë®¬ë ˆì´í„°] [ğŸ”€ í†µí•©] [âš™ï¸ ì„¤ì •â—€]                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ”‘ API ì„¤ì •                                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚  Gemini API Key: [â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—____] [ì €ì¥]                         â”‚
â”‚  ëª¨ë¸: [gemini-2.5-pro â–¼]                                                  â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“ ì—ë””í„° ì„¤ì •                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚  í°íŠ¸ í¬ê¸°: [14px â–¼]                                                       â”‚
â”‚  ìë™ì™„ì„±: [â˜‘ï¸ í™œì„±í™”]                                                     â”‚
â”‚  ì¤„ ë°”ê¿ˆ: [â˜‘ï¸ í™œì„±í™”]                                                      â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“š CBS ë ˆí¼ëŸ°ìŠ¤                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚  AI í”„ë¡¬í”„íŠ¸ì— í¬í•¨í•  CBS ëª…ë ¹ì–´ ì„ íƒ:                                      â”‚
â”‚  [â˜‘ï¸ ì¡°ê±´ë¬¸] [â˜‘ï¸ ë³€ìˆ˜] [â˜‘ï¸ ì—°ì‚°] [â˜ ê³ ê¸‰]                                 â”‚
â”‚                                                                             â”‚
â”‚  ğŸ’¾ ë°ì´í„°                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                  â”‚
â”‚  [ğŸ“¤ ì„¤ì • ë‚´ë³´ë‚´ê¸°] [ğŸ“¥ ì„¤ì • ê°€ì ¸ì˜¤ê¸°] [ğŸ—‘ï¸ ì´ˆê¸°í™”]                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. í™”ë©´ ê°„ ë°ì´í„° íë¦„

### 3.1 ë¹ ë¥¸ ì „í™˜ ì‹œë‚˜ë¦¬ì˜¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‹œë‚˜ë¦¬ì˜¤ 1: í¸ì§‘ â†’ ì‹œë®¬ë ˆì´í„°                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. [í¸ì§‘] í™”ë©´ì—ì„œ Regex í•­ëª© ì„ íƒ                                         â”‚
â”‚  2. [ğŸ§ª ì„ íƒ í•­ëª© í…ŒìŠ¤íŠ¸] í´ë¦­                                              â”‚
â”‚  3. â†’ ìë™ìœ¼ë¡œ [ì‹œë®¬ë ˆì´í„°] í™”ë©´ ì „í™˜                                       â”‚
â”‚  4. â†’ Regex íƒ­ ì„ íƒë¨                                                       â”‚
â”‚  5. â†’ IN/OUT í•„ë“œì— ì„ íƒí•œ Regex ìë™ ì…ë ¥                                  â”‚
â”‚  6. â†’ ìƒ˜í”Œ í…ìŠ¤íŠ¸ ìë™ ìƒì„±                                                 â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì‹œë‚˜ë¦¬ì˜¤ 2: ì‹œë®¬ë ˆì´í„° â†’ í¸ì§‘                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. [ì‹œë®¬ë ˆì´í„°]ì—ì„œ ì½”ë“œ ìˆ˜ì •/í…ŒìŠ¤íŠ¸ ì™„ë£Œ                                  â”‚
â”‚  2. [ğŸ“ í¸ì§‘ê¸°ë¡œ ë³µì‚¬] í´ë¦­                                                 â”‚
â”‚  3. â†’ ìë™ìœ¼ë¡œ [í¸ì§‘] í™”ë©´ ì „í™˜                                             â”‚
â”‚  4. â†’ ì›ë³¸ í•­ëª©ì— ìˆ˜ì •ëœ ì½”ë“œ ë°˜ì˜                                          â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì‹œë‚˜ë¦¬ì˜¤ 3: í¸ì§‘ â†’ í†µí•© í…ŒìŠ¤íŠ¸                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. [í¸ì§‘]ì—ì„œ ì—¬ëŸ¬ íŒŒì¼ ë¡œë“œ (ìºë¦­í„° + ëª¨ë“ˆë“¤)                             â”‚
â”‚  2. [í†µí•© í…ŒìŠ¤íŠ¸] íƒ­ í´ë¦­                                                   â”‚
â”‚  3. â†’ ë¡œë“œëœ ëª¨ë“  íŒŒì¼ì˜ Regex/Trigger ìë™ ë¶„ì„                            â”‚
â”‚  4. â†’ ì¶©ëŒ ê°ì§€ ê²°ê³¼ í‘œì‹œ                                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ê³µìœ  ìƒíƒœ (Store)

```typescript
// ë¡œë“œëœ íŒŒì¼ë“¤
loadedFiles: {
  character: CharacterCard | null,
  preset: RisuPreset | null,
  modules: RisuModule[]
}

// í˜„ì¬ í¸ì§‘ ì¤‘ì¸ íŒŒì¼
currentFile: {
  type: 'character' | 'preset' | 'module',
  index?: number,  // ëª¨ë“ˆì¸ ê²½ìš°
  data: any
}

// ì‹œë®¬ë ˆì´í„° ìƒíƒœ
simulator: {
  cbsVariables: {
    chatVar: Record<string, string>,
    globalVar: Record<string, string>
  },
  testInput: string,
  lastResult: SimulationResult | null
}

// ì „í™˜ ìš”ì²­
transition: {
  target: 'editor' | 'simulator' | 'integrated',
  payload?: {
    type: 'cbs' | 'regex' | 'html',
    code: string,
    sourceFile?: string,
    sourceItem?: string
  }
}
```

---

## 4. ì•„í‚¤í…ì²˜

### 4.1 ë ˆì´ì–´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           RisuStudio ì•„í‚¤í…ì²˜                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         UI Layer (Svelte)                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚
â”‚  â”‚  â”‚ Editor   â”‚ â”‚Simulator â”‚ â”‚Integratedâ”‚ â”‚ Settings â”‚               â”‚   â”‚
â”‚  â”‚  â”‚ Screen   â”‚ â”‚ Screen   â”‚ â”‚  Screen  â”‚ â”‚  Screen  â”‚               â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚            â”‚            â”‚            â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Feature Layer (ì„œë¹„ìŠ¤)                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚  â”‚  â”‚   Editor    â”‚  â”‚  Simulator  â”‚  â”‚  AIHelper   â”‚                 â”‚   â”‚
â”‚  â”‚  â”‚  Service    â”‚  â”‚   Service   â”‚  â”‚  Service    â”‚                 â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                â”‚                â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         Core Layer (ìˆœìˆ˜ ë¡œì§)                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚ Parser  â”‚ â”‚   CBS   â”‚ â”‚  Regex  â”‚ â”‚ Trigger â”‚ â”‚ Prompt  â”‚       â”‚   â”‚
â”‚  â”‚  â”‚ (íŒŒì¼) â”‚ â”‚ Runtime â”‚ â”‚ Engine  â”‚ â”‚ Engine  â”‚ â”‚ Builder â”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Integration Layer (ì™¸ë¶€ ì—°ë™)                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚ VS Code Link â”‚  â”‚ AI Context   â”‚  â”‚ File Export  â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Core Layer ìƒì„¸

```typescript
// === Parser (íŒŒì¼ í¬ë§·) ===
interface IParser<T> {
  parse(data: ArrayBuffer): T;
  serialize(obj: T): ArrayBuffer;
}

const characterCardParser: IParser<CharacterCard>;
const risumParser: IParser<RisuModule>;
const risupParser: IParser<RisuPreset>;
const pngParser: IParser<CharacterCard>;  // tEXt ì²­í¬

// === CBS Runtime ===
interface CBSContext {
  chatVars: Record<string, string>;
  globalVars: Record<string, string>;
  char: { name: string; nickname?: string };
  user: string;
  chatHistory: Message[];
  chatID: number;
}

interface CBSResult {
  output: string;
  trace: CBSTraceStep[];
  modifiedVars: Record<string, string>;
}

function evaluateCBS(code: string, context: CBSContext): CBSResult;
function parseCBSTree(code: string): CBSNode;
function extractVariables(code: string): VariableInfo[];

// === Regex Engine ===
interface RegexScript {
  in: string;
  out: string;
  type: 'editinput' | 'editoutput' | 'editdisplay' | 'editprocess';
  source: 'preset' | 'character' | 'module';
  moduleName?: string;
}

function executeRegex(input: string, script: RegexScript, cbsContext: CBSContext): RegexResult;
function executeRegexChain(input: string, scripts: RegexScript[], cbsContext: CBSContext): RegexChainResult;
function debugRegex(pattern: string, input: string): RegexDebugResult;

// === Trigger Engine ===
interface TriggerScript {
  type: 'v2' | 'lua';
  conditions: TriggerCondition[];  // V2
  effects: TriggerEffect[];        // V2
  luaCode?: string;                // Lua
}

function evaluateTriggerCondition(trigger: TriggerScript, context: TriggerContext): boolean;
function executeTriggerEffects(trigger: TriggerScript, context: TriggerContext): TriggerResult;
function executeLuaTrigger(code: string, context: LuaContext): LuaResult;  // wasmoon ì‚¬ìš©

// === Prompt Builder ===
function buildPromptChain(
  preset: RisuPreset,
  character: CharacterCard,
  modules: RisuModule[],
  chat: Message[]
): PromptChainResult;
```

### 4.3 Feature Layer ìƒì„¸

```typescript
// === Editor Service ===
class EditorService {
  loadFile(file: File): Promise<EditableDocument>;
  saveFile(doc: EditableDocument): Promise<Blob>;
  
  // CRUD
  addLorebook(doc: CharacterCard, lore: Lorebook): void;
  updateLorebook(doc: CharacterCard, id: string, data: Partial<Lorebook>): void;
  deleteLorebook(doc: CharacterCard, id: string): void;
  
  addRegex(doc: HasRegex, regex: RegexScript): void;
  updateRegex(doc: HasRegex, index: number, data: Partial<RegexScript>): void;
  
  // ê²€ìƒ‰
  searchInDocument(doc: any, query: string): SearchResult[];
  replaceInDocument(doc: any, find: string, replace: string): ReplaceResult;
}

// === Simulator Service ===
class SimulatorService {
  // ë‹¨ì¼ í…ŒìŠ¤íŠ¸
  simulateCBS(code: string, context: CBSContext): CBSResult;
  simulateRegex(input: string, regex: RegexScript, context: CBSContext): RegexResult;
  simulateTriggerV2(trigger: TriggerScript, context: TriggerContext): TriggerResult;
  simulateTriggerLua(code: string, context: LuaContext): LuaResult;
  renderHTML(html: string, css: string, context: CBSContext): string;
  
  // ì±„íŒ… ì‹œë®¬ë ˆì´ì…˜
  simulateChat(message: string, context: ChatContext): ChatSimResult;
  
  // í†µí•© í…ŒìŠ¤íŠ¸
  simulateIntegrated(config: IntegratedConfig): IntegratedResult;
  analyzeRegexChain(files: LoadedFiles): RegexChainAnalysis;
  analyzeTriggerChain(files: LoadedFiles): TriggerChainAnalysis;
  detectConflicts(files: LoadedFiles): ConflictReport;
  buildDependencyGraph(files: LoadedFiles): DependencyGraph;
}

// === AI Helper Service ===
class AIHelperService {
  // Copy for AI
  buildContext(options: CopyForAIOptions): string;
  getCBSReference(level: 'basic' | 'full'): string;
  
  // AI ìƒì„± (Gemini)
  generateCode(prompt: string, image?: File): Promise<GeneratedCode>;
  
  // ì‘ë‹µ íŒŒì‹±
  parseAIResponse(response: string): ParsedCode;
}
```

---

## 5. ê¸°ëŠ¥ ìƒì„¸

### 5.1 íŒŒì¼ ì§€ì›

| í¬ë§· | ì½ê¸° | ì“°ê¸° | ì˜ì¡´ì„± | ìš°ì„ ìˆœìœ„ |
|------|:----:|:----:|--------|:--------:|
| .charx (ìºë¦­í„° ì¹´ë“œ ZIP) | âœ… | âœ… | fflate | P0 |
| .risum (RPack) | âœ… | âœ… | ìˆœìˆ˜ JS | P0 |
| .risup (RPack+fflate+MsgPack+AES) | âœ… | P2 | fflate, msgpackr | P1 |
| .risupreset (fflate+MsgPack+AES) | âœ… | P3 | fflate, msgpackr | P1 |
| .png/.jpg ìºë¦­í„° | âœ… | P3 | ìˆœìˆ˜ JS | P2 |
| NAI/ST í”„ë¦¬ì…‹ ë³€í™˜ | âœ… | âŒ | - | P2 |

#### íŒŒì¼ ì²˜ë¦¬ ì²´ì¸ ìš”ì•½

```
.charx:  file â†’ fflate.unzip â†’ card.json + assets/
.risum:  file â†’ [Magic+Ver] â†’ RPackí•´ì œ â†’ JSON + ì—ì…‹ë¸”ë¡ë“¤
.risup:  file â†’ RPack â†’ fflate â†’ MsgPack â†’ AESë³µí˜¸í™” â†’ MsgPack â†’ Preset
.risupreset: file â†’ fflate â†’ MsgPack â†’ AESë³µí˜¸í™” â†’ MsgPack â†’ Preset
.png:    file â†’ tEXtì²­í¬ íŒŒì‹± â†’ Base64 â†’ JSON
```

#### ì•”í˜¸í™” í‚¤ (risup/risupreset)

```typescript
const PRESET_SECRET = 'risupreset';  // í•˜ë“œì½”ë”©
// IV: 12ë°”ì´íŠ¸ 0 ê³ ì •
// ì•Œê³ ë¦¬ì¦˜: AES-GCM (Web Crypto API)
```

### 5.2 í¸ì§‘ ê¸°ëŠ¥ (ëª¨ë“ˆ ë§¤ë‹ˆì € ê¸°ëŠ¥ í†µí•©)

| ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|------|------|:--------:|
| ê¸°ë³¸ ì •ë³´ í¸ì§‘ | ì´ë¦„, ì„¤ëª…, ì„±ê²©, ì‹œë‚˜ë¦¬ì˜¤ | P0 |
| ë¡œì–´ë¶ CRUD | ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ/ê²€ìƒ‰/ì •ë ¬/í´ë”ë§ | P0 |
| Regex í¸ì§‘ | IN/OUT/íƒ€ì…/í”Œë˜ê·¸, CBS í•˜ì´ë¼ì´íŠ¸ | P0 |
| Trigger í¸ì§‘ | V2 êµ¬ì¡°/Lua ì½”ë“œ, ì¡°ê±´/íš¨ê³¼ í¸ì§‘ | P0 |
| ì—ì…‹ ê´€ë¦¬ | ê°¤ëŸ¬ë¦¬ ë·°, ì—…ë¡œë“œ, ì‚­ì œ, í´ë”ë§ | P1 |
| í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ | í”„ë¦¬ì…‹ ì „ìš©, CBS í•˜ì´ë¼ì´íŠ¸ | P1 |
| ì „ì²´ ê²€ìƒ‰ | ëª¨ë“  í•„ë“œì—ì„œ í…ìŠ¤íŠ¸ ê²€ìƒ‰ | P1 |
| ì¼ê´„ ì¹˜í™˜ | Find & Replace | P2 |
| ë°±ì—…/ë³µì› | íŒŒì¼ ë²„ì „ ê´€ë¦¬ | P2 |

### 5.3 ì‹œë®¬ë ˆì´í„° ê¸°ëŠ¥ (Interface-Generation í†µí•©)

| ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|------|------|:--------:|
| CBS ì‹¤í–‰ | CBS êµ¬ë¬¸ í‰ê°€ ë° ê²°ê³¼ í‘œì‹œ | P0 |
| ë³€ìˆ˜ íŒ¨ë„ | chatVar/globalVar ì‹¤ì‹œê°„ í¸ì§‘ | P0 |
| ì‹¤í–‰ ì¶”ì  | ë‹¨ê³„ë³„ CBS ì‹¤í–‰ ê³¼ì • í‘œì‹œ | P0 |
| Regex í…ŒìŠ¤íŠ¸ | IN/OUT/ìƒ˜í”Œ í…ŒìŠ¤íŠ¸ | P0 |
| Regex ë””ë²„ê¹… | ì ì§„ì  ë§¤ì¹­, ìº¡ì²˜ ê·¸ë£¹ í‘œì‹œ | P0 |
| Trigger ì‹¤í–‰ | V2 ì¡°ê±´ í‰ê°€, Lua ì‹¤í–‰ | P0 |
| ì±„íŒ… ì‹œë®¬ë ˆì´ì…˜ | ê°€ìƒ ì±„íŒ…ìœ¼ë¡œ Trigger í…ŒìŠ¤íŠ¸ | P1 |
| HTML ë¯¸ë¦¬ë³´ê¸° | HTML/CSS ë Œë”ë§ + CBS | P1 |
| AI ìƒì„± | Geminië¡œ ì½”ë“œ ìë™ ìƒì„± | P2 |

### 5.4 í†µí•© í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|------|------|:--------:|
| Regex ì²´ì¸ ë¶„ì„ | ìˆœì„œëŒ€ë¡œ ëª©ë¡í™” | P0 |
| Regex ì²´ì¸ ì‹¤í–‰ | í…ŒìŠ¤íŠ¸ ì…ë ¥ â†’ ì²´ì¸ ì ìš© | P0 |
| Trigger ì²´ì¸ ë¶„ì„ | íƒ€ì´í•‘/ì´ë²¤íŠ¸ë³„ í†µí•© ëª©ë¡ | P0 |
| Trigger ì²´ì¸ ì‹¤í–‰ | ê°€ìƒ ì±„íŒ…ìœ¼ë¡œ Trigger í…ŒìŠ¤íŠ¸ | P1 |
| ì¶©ëŒ ê°ì§€ | ì¤‘ë³µ íŒ¨í„´, ë®ì–´ì“°ê¸° ê²½ê³  | P1 |
| ë³€ìˆ˜ ì¶©ëŒ | ê°™ì€ ë³€ìˆ˜ëª… ì‚¬ìš© ê°ì§€ | P1 |
| í”„ë¡¬í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸° | ìµœì¢… í”„ë¡¬í”„íŠ¸ êµ¬ì¡° í‘œì‹œ | P2 |

### 5.5 AI ì—°ë™ ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|------|------|:--------:|
| Copy for AI | ì»¨í…ìŠ¤íŠ¸ + ë ˆí¼ëŸ°ìŠ¤ + ìš”ì²­ ì¡°í•© | P0 |
| Paste AI Code | ì½”ë“œ ë¸”ë¡ ê°ì§€ ë° ë°°ì¹˜ | P1 |
| ë‚´ì¥ AI ìƒì„± | Gemini API (ì„ íƒì ) | P2 |

### 5.6 ì™¸ë¶€ ì—°ë™

| ê¸°ëŠ¥ | ì„¤ëª… | ìš°ì„ ìˆœìœ„ |
|------|------|:--------:|
| VS Code ë‚´ë³´ë‚´ê¸° | .cbs íŒŒì¼ + ë¶„ì„ | P1 |
| VS Code ê°€ì ¸ì˜¤ê¸° | ìˆ˜ì •ëœ íŒŒì¼ ë°˜ì˜ | P2 |

---

## 6. ê°œë°œ ë¡œë“œë§µ

### Phase 1: í•µì‹¬ ê¸°ë°˜ (2ì£¼)

```
ì°¸ì¡°: RisuAI_Format_Specification.md

Core Layer:
â˜ RPack ì½”ë± (256ë°”ì´íŠ¸ í…Œì´ë¸” ë§¤í•‘)
â˜ BinaryReader/Writer
â˜ AES-GCM ì•”í˜¸í™”/ë³µí˜¸í™” (crypto.ts)
â˜ characterCardParser - fflate unzip, card.json íŒŒì‹±
â˜ risumParser - RPack + ë°”ì´ë„ˆë¦¬ íŒŒì‹±
â˜ risupParser - RPack â†’ fflate â†’ MsgPack â†’ AES (í’€ì²´ì¸)
â˜ CBS Runtime ê¸°ì´ˆ (ì¡°ê±´ë¬¸, ë³€ìˆ˜, ì—°ì‚°)

UI:
â˜ í”„ë¡œì íŠ¸ ì„¤ì • (Svelte + Vite + TypeScript)
â˜ ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜ (íƒ­ ì „í™˜)
â˜ íŒŒì¼ ë¡œë” (ë“œë˜ê·¸ì•¤ë“œë¡­)

ê²°ê³¼ë¬¼: .charx/.risum/.risup íŒŒì¼ ì—´ê¸° â†’ JSON í‘œì‹œ
```

### Phase 2: í¸ì§‘ê¸° (2ì£¼)

```
ì°¸ì¡°: ModuleManager_Analysis.md, module-manager-v3_2.0.6.js

UI:
â˜ í¸ì§‘ í™”ë©´ í”„ë ˆì„ (ëª¨ë“ˆë§¤ë‹ˆì € ìŠ¤íƒ€ì¼)
â˜ íƒ­ UI (ì •ë³´/ë¡œì–´ë¶/Regex/Trigger/ì—ì…‹)
â˜ ë¶ë§ˆí¬ íŒ¨ë„ (í•­ëª© ëª©ë¡, ê²€ìƒ‰, í´ë”)
â˜ CodeMirror 6 í†µí•© + CBS í•˜ì´ë¼ì´íŠ¸
â˜ ìë™ì™„ì„± ({{, <, :: íŠ¸ë¦¬ê±°)

Feature:
â˜ EditorService - CRUD ì‘ì—…
â˜ íŒŒì¼ ì €ì¥/ë‹¤ìš´ë¡œë“œ

ê²°ê³¼ë¬¼: ìºë¦­í„°/ëª¨ë“ˆ/í”„ë¦¬ì…‹ í¸ì§‘ ê°€ëŠ¥
```

### Phase 3: ì‹œë®¬ë ˆì´í„° (3ì£¼)

```
ì°¸ì¡°: Risuai-2026.1.184/src/ts/process/cbs.ts, triggers.ts
ì°¸ì¡°: RisuAI-Interface-Generation/ (Regex ë””ë²„ê±°)

Core:
â˜ CBS Runtime í™•ì¥ (RisuAI cbs.ts ì¶”ì¶œ)
â˜ Regex Engine + ì ì§„ì  ë””ë²„ê±°
â˜ Trigger V2 Engine (ì¡°ê±´ í‰ê°€ + íš¨ê³¼ ì‹¤í–‰)
â˜ Lua Runtime (wasmoon WASM)
â˜ ì‹¤í–‰ ì¶”ì  (Trace)

UI:
â˜ ì‹œë®¬ë ˆì´í„° í™”ë©´
â˜ ë³€ìˆ˜ íŒ¨ë„ (chatVar/globalVar)
â˜ ê²°ê³¼/ì¶”ì  í‘œì‹œ
â˜ CBS/Regex/Trigger/HTML íƒ­
â˜ ì±„íŒ… ì‹œë®¬ë ˆì´í„°

Feature:
â˜ SimulatorService

ê²°ê³¼ë¬¼: CBS/Regex/Trigger í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
```

### Phase 4: í†µí•© & AI (2ì£¼)

```
ì°¸ì¡°: EXIF_Extraction_Comparison.md (ì—ì…‹ ë©”íƒ€ë°ì´í„°)

Core:
â˜ Regex Chain ë¶„ì„
â˜ Trigger Chain ë¶„ì„
â˜ ì¶©ëŒ ê°ì§€

UI:
â˜ í†µí•© í…ŒìŠ¤íŠ¸ í™”ë©´
â˜ HTML/CSS íƒ­
â˜ AI ìƒì„± íƒ­
â˜ ì—ì…‹ ë©”íƒ€ë°ì´í„° ë·°ì–´ (NAI/ComfyUI)

Feature:
â˜ AIHelperService
â˜ Copy for AI

ê²°ê³¼ë¬¼: í†µí•© í…ŒìŠ¤íŠ¸ + AI ì—°ë™ + ì—ì…‹ ë¶„ì„
```

### Phase 5: ì™„ì„±ë„ (1ì£¼)

```
ì°¸ì¡°: RisuExtractUtil/src/preset.ts (NAI/ST ë³€í™˜)

â˜ PNG ìºë¦­í„° ì¹´ë“œ ì§€ì›
â˜ NAI/ST í”„ë¦¬ì…‹ ë³€í™˜ ì„í¬íŠ¸
â˜ ì„¤ì • í™”ë©´
â˜ ë°˜ì‘í˜• (ëª¨ë°”ì¼)
â˜ PWA ì„¤ì •
â˜ GitHub Pages ë°°í¬

ê²°ê³¼ë¬¼: ë°°í¬ ê°€ëŠ¥í•œ ë²„ì „
```

---

## 7. ì˜ì¡´ì„± ì •ë¦¬

### í•„ìˆ˜ íŒ¨í‚¤ì§€

| íŒ¨í‚¤ì§€ | ìš©ë„ | í¬ê¸° |
|--------|------|------|
| **fflate** | ZIP (.charx), DEFLATE (.risup) | ~13KB |
| **msgpackr** | MsgPack (.risup/.risupreset) | ~15KB |
| **@codemirror/*** | ì½”ë“œ ì—ë””í„° | ~150KB |

### ì„ íƒì  íŒ¨í‚¤ì§€

| íŒ¨í‚¤ì§€ | ìš©ë„ | í¬ê¸° | ìš°ì„ ìˆœìœ„ |
|--------|------|------|----------|
| **wasmoon** | Lua ëŸ°íƒ€ì„ (Trigger) | ~200KB | P1 |

### ìˆœìˆ˜ JS êµ¬í˜„ (ì˜ì¡´ì„± ì—†ìŒ)

- RPack ì½”ë± (256ë°”ì´íŠ¸ í…Œì´ë¸”)
- AES-GCM (Web Crypto API)
- BinaryReader/Writer
- PNG tEXt íŒŒì‹±
- ìŠ¤í…Œê°€ë…¸ê·¸ë˜í”¼ ì¶”ì¶œ

### í…ŒìŠ¤íŠ¸ íŒ¨í‚¤ì§€

| íŒ¨í‚¤ì§€ | ìš©ë„ |
|--------|------|
| **vitest** | í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆ + ìŠ¤ëƒ…ìƒ· |
| **@vitest/coverage-v8** | ì»¤ë²„ë¦¬ì§€ (ì„ íƒ) |

---

## 8. í…ŒìŠ¤íŠ¸ ë° ë¡œê¹…

> **ì°¸ì¡°**: `module-manager-v3_2.0.6.js`ì˜ `validateModule()`, `MODULE_SCHEMA`

### 8.1 í…ŒìŠ¤íŠ¸ ì „ëµ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          í…ŒìŠ¤íŠ¸ ê³„ì¸µ êµ¬ì¡°                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1ï¸âƒ£ íŒŒì„œ í…ŒìŠ¤íŠ¸ (ìŠ¤í‚¤ë§ˆ ë³€ê²½ ê°ì§€)                                          â”‚
â”‚     â€¢ .charx/.risum/.risup íŒŒì‹± â†’ ìŠ¤ëƒ…ìƒ· ë¹„êµ                               â”‚
â”‚     â€¢ AI ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° ì¶”ì¶œ â†’ ìŠ¤ëƒ…ìƒ· ë¹„êµ                                â”‚
â”‚     â€¢ RisuAI ì—…ë°ì´íŠ¸ ì‹œ ìŠ¤í‚¤ë§ˆ ë³€ê²½ ìë™ ê°ì§€                               â”‚
â”‚                                                                             â”‚
â”‚  2ï¸âƒ£ ìœ íš¨ì„± ê²€ì¦ (í¸ì§‘ ê²°ê³¼ë¬¼)                                               â”‚
â”‚     â€¢ í¸ì§‘ëœ ìºë¦­í„°/ëª¨ë“ˆ/í”„ë¦¬ì…‹ì´ RisuAIì—ì„œ ë¡œë“œ ê°€ëŠ¥í•œì§€                    â”‚
â”‚     â€¢ í•„ìˆ˜ í•„ë“œ ì¡´ì¬, íƒ€ì… ê²€ì¦, ì¤‘ë³µ ID ê²€ì‚¬                                â”‚
â”‚     â€¢ ì €ì¥ ì „ ì‹¤ì‹œê°„ ê²€ì¦ + ì €ì¥ ì‹œ ìµœì¢… ê²€ì¦                                â”‚
â”‚                                                                             â”‚
â”‚  3ï¸âƒ£ ëŸ°íƒ€ì„ í…ŒìŠ¤íŠ¸ (ì‹œë®¬ë ˆì´í„°)                                              â”‚
â”‚     â€¢ CBS ëª…ë ¹ì–´ë³„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸                                               â”‚
â”‚     â€¢ Regex íŒ¨í„´ ìœ íš¨ì„±                                                      â”‚
â”‚     â€¢ Trigger ì¡°ê±´/íš¨ê³¼ í‰ê°€                                                 â”‚
â”‚                                                                             â”‚
â”‚  4ï¸âƒ£ í†µí•© í…ŒìŠ¤íŠ¸ (E2E)                                                       â”‚
â”‚     â€¢ íŒŒì¼ ë¡œë“œ â†’ í¸ì§‘ â†’ ì €ì¥ â†’ ì¬ë¡œë“œ ì™•ë³µ                                  â”‚
â”‚     â€¢ ì‹œë®¬ë ˆì´í„° ì²´ì¸ ì‹¤í–‰                                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
tests/
â”œâ”€â”€ fixtures/                      # í…ŒìŠ¤íŠ¸ìš© ìƒ˜í”Œ íŒŒì¼
â”‚   â”œâ”€â”€ charactercard/
â”‚   â”‚   â”œâ”€â”€ v3-basic.charx         # ê¸°ë³¸ ìºë¦­í„°
â”‚   â”‚   â”œâ”€â”€ v3-with-assets.charx   # ì—ì…‹ í¬í•¨
â”‚   â”‚   â”œâ”€â”€ v3-complex.charx       # ë³µì¡í•œ ë¡œì–´ë¶/íŠ¸ë¦¬ê±°
â”‚   â”‚   â””â”€â”€ v2-legacy.charx        # CCv2 í˜¸í™˜ì„±
â”‚   â”œâ”€â”€ risum/
â”‚   â”‚   â”œâ”€â”€ v1-module.risum
â”‚   â”‚   â””â”€â”€ v1-with-regex.risum
â”‚   â”œâ”€â”€ risup/
â”‚   â”‚   â”œâ”€â”€ v1-preset.risup
â”‚   â”‚   â””â”€â”€ legacy.risupreset
â”‚   â””â”€â”€ images/
â”‚       â”œâ”€â”€ nai-v3.png             # NAI ìŠ¤í…Œê°€ë…¸
â”‚       â”œâ”€â”€ comfy-basic.png        # ComfyUI ë©”íƒ€
â”‚       â””â”€â”€ a1111-params.png       # A1111 parameters
â”‚
â”œâ”€â”€ parsers/                       # íŒŒì„œ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ charactercard.test.ts
â”‚   â”œâ”€â”€ risum.test.ts
â”‚   â”œâ”€â”€ risup.test.ts
â”‚   â””â”€â”€ image-meta.test.ts
â”‚
â”œâ”€â”€ validation/                    # ìœ íš¨ì„± ê²€ì¦ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ character.test.ts
â”‚   â”œâ”€â”€ module.test.ts
â”‚   â””â”€â”€ preset.test.ts
â”‚
â”œâ”€â”€ runtime/                       # ëŸ°íƒ€ì„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ cbs/
â”‚   â”‚   â”œâ”€â”€ variables.test.ts
â”‚   â”‚   â”œâ”€â”€ conditions.test.ts
â”‚   â”‚   â””â”€â”€ operations.test.ts
â”‚   â”œâ”€â”€ regex.test.ts
â”‚   â””â”€â”€ trigger.test.ts
â”‚
â”œâ”€â”€ integration/                   # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ roundtrip.test.ts
â”‚
â””â”€â”€ __snapshots__/                 # Vitest ìŠ¤ëƒ…ìƒ·
```

### 8.3 íŒŒì„œ í…ŒìŠ¤íŠ¸ (ìŠ¤í‚¤ë§ˆ ë³€ê²½ ê°ì§€)

```typescript
// tests/parsers/charx.test.ts
import { describe, it, expect } from 'vitest';
import { parseCharx } from '$lib/core/formats/charx';
import { readFileSync } from 'fs';

describe('charx parser', () => {
  const fixture = readFileSync('tests/fixtures/charx/v3-basic.charx');

  it('íŒŒì‹± ê²°ê³¼ê°€ ìŠ¤ëƒ…ìƒ·ê³¼ ì¼ì¹˜ (ìŠ¤í‚¤ë§ˆ ë³€ê²½ ê°ì§€)', async () => {
    const result = await parseCharx(fixture);
    
    // ë¯¼ê° í•„ë“œ ì œì™¸ (ì‹œê°„, UUID ë“±)
    const snapshot = {
      spec: result.card.spec,
      spec_version: result.card.spec_version,
      data: {
        name: result.card.data.name,
        // ... ì£¼ìš” í•„ë“œ
      }
    };
    
    expect(snapshot).toMatchSnapshot();
  });

  it('CCv3 í•„ìˆ˜ í•„ë“œ ì¡´ì¬', async () => {
    const result = await parseCharx(fixture);
    
    expect(result.card.spec).toBe('chara_card_v3');
    expect(result.card.data.name).toBeDefined();
    expect(result.card.data.description).toBeDefined();
  });

  it('ìƒˆ ìŠ¤í‚¤ë§ˆ ë²„ì „ ê²½ê³ ', async () => {
    const result = await parseCharx(fixture);
    
    // RisuAIê°€ ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸í•˜ë©´ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ë¡œ ì•Œë¦¼
    const KNOWN_VERSIONS = ['3.0', '3.1'];
    expect(KNOWN_VERSIONS).toContain(result.card.spec_version);
  });

  it('ì†ìƒëœ íŒŒì¼ graceful ì—ëŸ¬', async () => {
    const corrupted = new Uint8Array([0x00, 0x01, 0x02]);
    await expect(parseCharx(corrupted)).rejects.toThrow();
  });
});
```

### 8.4 ìœ íš¨ì„± ê²€ì¦ (í¸ì§‘ ê²°ê³¼ë¬¼)

> **ì°¸ì¡°**: `module-manager-v3_2.0.6.js` ë¼ì¸ 3580-3700 (`MODULE_SCHEMA`), ë¼ì¸ 9611+ (`validateModule`)

```typescript
// src/lib/core/validation/module.ts

export const MODULE_SCHEMA = {
  system: {
    id: { type: 'string', required: true },
    addedTime: { type: 'number', required: true }
  },
  required: {
    name: {
      type: 'string',
      validate: (v: unknown) => typeof v === 'string' && v.trim() !== '',
      errorMessage: 'ëª¨ë“ˆ ì´ë¦„ì´ í•„ìš”í•©ë‹ˆë‹¤'
    },
    description: {
      type: 'string',
      validate: (v: unknown) => typeof v === 'string',
      errorMessage: 'ëª¨ë“ˆ ì„¤ëª…ì´ í•„ìš”í•©ë‹ˆë‹¤'
    }
  },
  arrays: {
    lorebook: { itemType: 'object', uniqueId: '_id' },
    regex: { itemType: 'object', uniqueId: '_id' },
    trigger: { itemType: 'object', uniqueId: '_id' },
    assets: { itemType: 'array' }  // [id, path, ext]
  }
};

export interface ValidationResult {
  isValid: boolean;
  errors: ValidationError[];
  warnings: ValidationWarning[];
}

export interface ValidationError {
  level: 'error';
  path: string;
  message: string;
}

export interface ValidationWarning {
  level: 'warning';
  path: string;
  message: string;
}

export function validateModule(module: RisuModule): ValidationResult {
  const errors: ValidationError[] = [];
  const warnings: ValidationWarning[] = [];

  // í•„ìˆ˜ í•„ë“œ ê²€ì¦
  for (const [field, schema] of Object.entries(MODULE_SCHEMA.required)) {
    if (!schema.validate(module[field])) {
      errors.push({
        level: 'error',
        path: field,
        message: schema.errorMessage
      });
    }
  }

  // ë°°ì—´ í•„ë“œ ê²€ì¦
  for (const [field, schema] of Object.entries(MODULE_SCHEMA.arrays)) {
    const arr = module[field];
    if (arr !== undefined) {
      if (!Array.isArray(arr)) {
        errors.push({
          level: 'error',
          path: field,
          message: `${field}ê°€ ë°°ì—´ì´ ì•„ë‹™ë‹ˆë‹¤ (ë°ì´í„° ì†ìƒ)`
        });
      } else {
        // ì¤‘ë³µ ID ê²€ì‚¬
        if (schema.uniqueId) {
          const seenIds = new Set<string>();
          arr.forEach((item, idx) => {
            const id = item?.[schema.uniqueId];
            if (id) {
              if (seenIds.has(id)) {
                errors.push({
                  level: 'error',
                  path: `${field}[${idx}]`,
                  message: `ì¤‘ë³µ ID "${id}"`
                });
              }
              seenIds.add(id);
            }
          });
        }
      }
    }
  }

  // Trigger íŠ¹ìˆ˜ ê²€ì¦
  if (Array.isArray(module.trigger)) {
    module.trigger.forEach((t, idx) => {
      if (t.effect !== undefined && !Array.isArray(t.effect)) {
        errors.push({
          level: 'error',
          path: `trigger[${idx}].effect`,
          message: 'effectê°€ ë°°ì—´ì´ ì•„ë‹™ë‹ˆë‹¤'
        });
      }
      if (t.conditions !== undefined && !Array.isArray(t.conditions)) {
        errors.push({
          level: 'error',
          path: `trigger[${idx}].conditions`,
          message: 'conditionsê°€ ë°°ì—´ì´ ì•„ë‹™ë‹ˆë‹¤'
        });
      }
    });
  }

  return {
    isValid: errors.length === 0,
    errors,
    warnings
  };
}
```

### 8.5 ìºë¦­í„° ìœ íš¨ì„± ê²€ì¦

> **ì°¸ì¡°**: `Risuai-2026.1.184/src/ts/characterCards.ts` ë¼ì¸ 726 (`importCharacterCardSpec`)

```typescript
// src/lib/core/validation/character.ts

export const CHARACTER_SCHEMA = {
  required: {
    name: {
      validate: (v: unknown) => typeof v === 'string' && v.trim() !== '',
      errorMessage: 'ìºë¦­í„° ì´ë¦„ì´ í•„ìš”í•©ë‹ˆë‹¤'
    },
    description: {
      validate: (v: unknown) => typeof v === 'string',
      errorMessage: 'ì„¤ëª…ì´ í•„ìš”í•©ë‹ˆë‹¤'
    }
  },
  spec: {
    allowed: ['chara_card_v2', 'chara_card_v3'],
    errorMessage: 'ìœ íš¨í•˜ì§€ ì•Šì€ spec ë²„ì „'
  }
};

export function validateCharacter(char: CharacterCard): ValidationResult {
  const errors: ValidationError[] = [];
  const warnings: ValidationWarning[] = [];

  // spec ê²€ì¦
  if (!CHARACTER_SCHEMA.spec.allowed.includes(char.spec)) {
    errors.push({
      level: 'error',
      path: 'spec',
      message: CHARACTER_SCHEMA.spec.errorMessage
    });
  }

  // í•„ìˆ˜ í•„ë“œ
  for (const [field, schema] of Object.entries(CHARACTER_SCHEMA.required)) {
    if (!schema.validate(char.data?.[field])) {
      errors.push({
        level: 'error',
        path: `data.${field}`,
        message: schema.errorMessage
      });
    }
  }

  // globalLore ê²€ì¦
  if (char.data?.extensions?.risuai?.additionalData?.globalLore) {
    const lore = char.data.extensions.risuai.additionalData.globalLore;
    if (!Array.isArray(lore)) {
      errors.push({
        level: 'error',
        path: 'globalLore',
        message: 'globalLoreê°€ ë°°ì—´ì´ ì•„ë‹™ë‹ˆë‹¤'
      });
    }
  }

  // customScripts (regex) ê²€ì¦
  if (char.data?.extensions?.risuai?.customScripts) {
    const scripts = char.data.extensions.risuai.customScripts;
    if (!Array.isArray(scripts)) {
      errors.push({
        level: 'error',
        path: 'customScripts',
        message: 'customScriptsê°€ ë°°ì—´ì´ ì•„ë‹™ë‹ˆë‹¤'
      });
    }
  }

  return { isValid: errors.length === 0, errors, warnings };
}
```

### 8.6 ì‹¤ì‹œê°„ ê²€ì¦ UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ“ í¸ì§‘â—€] [ğŸ§ª ì‹œë®¬ë ˆì´í„°] [ğŸ”€ í†µí•©] [âš™ï¸]                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ MyModule.risum                                     âœ… ìœ íš¨ | âš ï¸ ê²½ê³  1 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€ ê²€ì¦ ê²°ê³¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  âœ… í•„ìˆ˜ í•„ë“œ ê²€ì¦ í†µê³¼                                              â”‚   â”‚
â”‚  â”‚  âœ… ì¤‘ë³µ ID ì—†ìŒ                                                     â”‚   â”‚
â”‚  â”‚  âš ï¸ lorebook[3]: ë¹ˆ í‚¤ì›Œë“œ - í™œì„±í™”ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ                 â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  [ğŸ’¾ ì €ì¥] [ğŸ”„ ì¬ê²€ì¦] [ğŸ“‹ ê²€ì¦ ê²°ê³¼ Copy for AI]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.7 ë¡œê¹… ì‹œìŠ¤í…œ

```typescript
// src/lib/core/logger.ts

export type LogLevel = 'DEBUG' | 'INFO' | 'WARN' | 'ERROR';
export type LogCategory = 'charx' | 'risum' | 'risup' | 'cbs' | 'regex' | 'trigger' | 'validation';

export interface LogEntry {
  timestamp: number;
  level: LogLevel;
  category: LogCategory;
  message: string;
  data?: unknown;
}

class Logger {
  private logs: LogEntry[] = [];
  private maxLogs = 1000;
  private listeners: Set<(entry: LogEntry) => void> = new Set();

  log(level: LogLevel, category: LogCategory, message: string, data?: unknown) {
    const entry: LogEntry = {
      timestamp: Date.now(),
      level,
      category,
      message,
      data
    };

    this.logs.push(entry);
    if (this.logs.length > this.maxLogs) {
      this.logs.shift();
    }

    // ë¦¬ìŠ¤ë„ˆ ì•Œë¦¼ (UI ì—…ë°ì´íŠ¸)
    this.listeners.forEach(fn => fn(entry));

    // ê°œë°œ ëª¨ë“œ ë˜ëŠ” WARN/ERRORëŠ” ì½˜ì†” ì¶œë ¥
    if (import.meta.env.DEV || level === 'WARN' || level === 'ERROR') {
      const method = level === 'ERROR' ? 'error' : level === 'WARN' ? 'warn' : 'log';
      console[method](`[${category}]`, message, data ?? '');
    }
  }

  // ì¹´í…Œê³ ë¦¬ë³„ í—¬í¼
  debug(category: LogCategory, msg: string, data?: unknown) {
    this.log('DEBUG', category, msg, data);
  }
  info(category: LogCategory, msg: string, data?: unknown) {
    this.log('INFO', category, msg, data);
  }
  warn(category: LogCategory, msg: string, data?: unknown) {
    this.log('WARN', category, msg, data);
  }
  error(category: LogCategory, msg: string, data?: unknown) {
    this.log('ERROR', category, msg, data);
  }

  // UI êµ¬ë…
  subscribe(fn: (entry: LogEntry) => void): () => void {
    this.listeners.add(fn);
    return () => this.listeners.delete(fn);
  }

  // í•„í„°ë§
  getByCategory(category: LogCategory, count = 50): LogEntry[] {
    return this.logs.filter(l => l.category === category).slice(-count);
  }

  getByLevel(level: LogLevel, count = 50): LogEntry[] {
    return this.logs.filter(l => l.level === level).slice(-count);
  }

  getRecent(count = 50): LogEntry[] {
    return this.logs.slice(-count);
  }

  // Copy for AI ìš© ë‚´ë³´ë‚´ê¸°
  exportForAI(options?: { categories?: LogCategory[]; levels?: LogLevel[] }): string {
    let filtered = this.logs;
    
    if (options?.categories) {
      filtered = filtered.filter(l => options.categories!.includes(l.category));
    }
    if (options?.levels) {
      filtered = filtered.filter(l => options.levels!.includes(l.level));
    }

    return filtered
      .map(l => {
        const time = new Date(l.timestamp).toISOString().slice(11, 19);
        const data = l.data ? ` | ${JSON.stringify(l.data)}` : '';
        return `[${time}] ${l.level} [${l.category}] ${l.message}${data}`;
      })
      .join('\n');
  }

  clear() {
    this.logs = [];
  }
}

export const logger = new Logger();
```

### 8.8 ë¡œê·¸ íŒ¨ë„ UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ“ í¸ì§‘] [ğŸ§ª ì‹œë®¬ë ˆì´í„°] [ğŸ”€ í†µí•©] [âš™ï¸ ì„¤ì •] [ğŸ“‹ ë¡œê·¸â—€]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” í•„í„°:                                                                   â”‚
â”‚  ë ˆë²¨: [â˜‘ï¸ ERROR] [â˜‘ï¸ WARN] [â˜ INFO] [â˜ DEBUG]                            â”‚
â”‚  ì¹´í…Œê³ ë¦¬: [â˜‘ï¸ all] [charx] [risum] [risup] [cbs] [regex] [validation]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  12:34:56  INFO   charx       MyChar.charx ë¡œë“œ ì™„ë£Œ (assets: 5)           â”‚
â”‚  12:34:57  DEBUG  charx       ZIP í•´ì œ - files: card.json, assets/...      â”‚
â”‚  12:34:58  WARN   charx       âš ï¸ ì˜ˆìƒê³¼ ë‹¤ë¥¸ ìŠ¤í‚¤ë§ˆ: 3.1 (expected: 3.0)   â”‚
â”‚  12:35:01  ERROR  validation  lorebook[3]: ì¤‘ë³µ ID "lore_001"              â”‚
â”‚  12:35:05  INFO   cbs         CBS ì‹¤í–‰ ì™„ë£Œ - 10 steps                     â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“‹ Copy for AI] [ğŸ“¤ Export JSON] [ğŸ—‘ï¸ Clear]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.9 í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì„¤ì •

```typescript
// vitest.config.ts
import { defineConfig } from 'vitest/config';
import { svelte } from '@sveltejs/vite-plugin-svelte';

export default defineConfig({
  plugins: [svelte({ hot: !process.env.VITEST })],
  test: {
    include: ['tests/**/*.test.ts'],
    globals: true,
    environment: 'jsdom',
    setupFiles: ['./vitest.setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'html'],
      include: ['src/lib/core/**']
    }
  }
});
```

```typescript
// vitest.setup.ts
import { vi } from 'vitest';

// Web Crypto API ëª¨í‚¹ (Node.js í™˜ê²½)
if (typeof globalThis.crypto === 'undefined') {
  const { webcrypto } = await import('crypto');
  globalThis.crypto = webcrypto as Crypto;
}
```

### 8.10 CI/CD í†µí•© (GitHub Actions)

```yaml
# .github/workflows/test.yml
name: Test

on:
  push:
    branches: [main]
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm'
      - run: npm ci
      - run: npm test
      - run: npm run test:coverage
```

---

## 9. í”„ë¡œì íŠ¸ êµ¬ì¡°

```
risustudio/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ core/                  # Core Layer
â”‚   â”‚   â”‚   â”œâ”€â”€ formats/           # íŒŒì¼ í¬ë§· (RisuAI_Format_Specification.md ì°¸ì¡°)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ rpack.ts       # RPack ì½”ë±
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ crypto.ts      # AES-GCM
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ binary.ts      # BinaryReader/Writer
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ charx.ts       # .charx íŒŒì„œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ risum.ts       # .risum íŒŒì„œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ risup.ts       # .risup íŒŒì„œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ png.ts         # PNG tEXt íŒŒì„œ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ converter.ts   # NAI/ST í”„ë¦¬ì…‹ ë³€í™˜
â”‚   â”‚   â”‚   â”œâ”€â”€ cbs/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ runtime.ts     # CBS ì‹¤í–‰ (RisuAI cbs.ts ì¶”ì¶œ)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ parser.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tracer.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ commands/      # CBS ëª…ë ¹ì–´ë³„
â”‚   â”‚   â”‚   â”œâ”€â”€ regex/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ engine.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ debugger.ts    # ì ì§„ì  ë””ë²„ê±°
â”‚   â”‚   â”‚   â”œâ”€â”€ trigger/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ v2Engine.ts    # V2 ì¡°ê±´/íš¨ê³¼
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ luaRuntime.ts  # wasmoon
â”‚   â”‚   â”‚   â”œâ”€â”€ metadata/          # AI ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ extractor.ts   # í†µí•© ì¶”ì¶œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stealth.ts     # NAI ìŠ¤í…Œê°€ë…¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ nai.ts         # NAI ì •ê·œí™”
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ comfy.ts       # ComfyUI ë…¸ë“œ ì²˜ë¦¬
â”‚   â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚   â”‚       â”œâ”€â”€ character.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ module.ts
â”‚   â”‚   â”‚       â””â”€â”€ preset.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/              # Feature Layer
â”‚   â”‚   â”‚   â”œâ”€â”€ editor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ simulator.ts
â”‚   â”‚   â”‚   â””â”€â”€ aiHelper.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stores/                # Shared State
â”‚   â”‚   â”‚   â”œâ”€â”€ files.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ simulator.ts
â”‚   â”‚   â”‚   â””â”€â”€ settings.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ components/            # UI Components
â”‚   â”‚       â”œâ”€â”€ common/
â”‚   â”‚       â”‚   â”œâ”€â”€ CodeEditor.svelte
â”‚   â”‚       â”‚   â”œâ”€â”€ Tabs.svelte
â”‚   â”‚       â”‚   â”œâ”€â”€ BookmarkPanel.svelte
â”‚   â”‚       â”‚   â””â”€â”€ Modal.svelte
â”‚   â”‚       â”œâ”€â”€ editor/
â”‚   â”‚       â”‚   â”œâ”€â”€ EditorScreen.svelte
â”‚   â”‚       â”‚   â”œâ”€â”€ InfoTab.svelte
â”‚   â”‚       â”‚   â”œâ”€â”€ LorebookTab.svelte
â”‚   â”‚       â”‚   â””â”€â”€ RegexTab.svelte
â”‚   â”‚       â”œâ”€â”€ simulator/
â”‚   â”‚       â”‚   â”œâ”€â”€ SimulatorScreen.svelte
â”‚   â”‚       â”‚   â”œâ”€â”€ CBSPanel.svelte
â”‚   â”‚       â”‚   â”œâ”€â”€ RegexPanel.svelte
â”‚   â”‚       â”‚   â”œâ”€â”€ HTMLPanel.svelte
â”‚   â”‚       â”‚   â””â”€â”€ VariablePanel.svelte
â”‚   â”‚       â”œâ”€â”€ integrated/
â”‚   â”‚       â”‚   â”œâ”€â”€ IntegratedScreen.svelte
â”‚   â”‚       â”‚   â””â”€â”€ RegexChainView.svelte
â”‚   â”‚       â””â”€â”€ settings/
â”‚   â”‚           â””â”€â”€ SettingsScreen.svelte
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ +page.svelte           # ë©”ì¸ í˜ì´ì§€
â”‚   â”‚
â”‚   â”œâ”€â”€ app.html
â”‚   â””â”€â”€ app.css
â”‚
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ cbs-reference.md           # CBS ë ˆí¼ëŸ°ìŠ¤
â”‚   â””â”€â”€ icons/
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ svelte.config.js
â”œâ”€â”€ vite.config.ts
â””â”€â”€ tsconfig.json
```

---

## 10. ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

### 10.1 CSS ë³€ìˆ˜

```css
:root {
  /* ëª¨ë“ˆë§¤ë‹ˆì € í…Œë§ˆ ìƒì† */
  --rs-bg: var(--risu-theme-bgcolor, #1a1a1a);
  --rs-bg-dark: var(--risu-theme-darkbg, #252525);
  --rs-border: var(--risu-theme-borderc, #444);
  --rs-text: var(--risu-theme-textcolor, #fff);
  --rs-text2: var(--risu-theme-textcolor2, #888);
  --rs-primary: var(--risu-theme-primary-600, #4682B4);
  --rs-selected: var(--risu-theme-selected, #333);
  
  /* ì‹œë®¬ë ˆì´í„° ì „ìš© */
  --rs-success: #27ae60;
  --rs-error: #e74c3c;
  --rs-warning: #f39c12;
  --rs-trace-bg: rgba(74, 144, 217, 0.1);
}
```

### 10.2 ì»´í¬ë„ŒíŠ¸ ë„¤ì´ë°

```
.rs-*         RisuStudio ê³µí†µ
.rs-editor-*  í¸ì§‘ê¸° ê´€ë ¨
.rs-sim-*     ì‹œë®¬ë ˆì´í„° ê´€ë ¨
.rs-int-*     í†µí•© í…ŒìŠ¤íŠ¸ ê´€ë ¨
```

---

## 11. ì°¸ê³  ìë£Œ

### 11.1 ì¬ì‚¬ìš© ì½”ë“œ

| ì†ŒìŠ¤ | ì¬ì‚¬ìš© í•­ëª© |
|------|------------|
| module-manager-v3 | CBS í•˜ì´ë¼ì´íŠ¸, ìë™ì™„ì„±, UI ìŠ¤íƒ€ì¼, **ìœ íš¨ì„± ê²€ì¦ ìŠ¤í‚¤ë§ˆ** |
| Interface-Generation | Regex ë””ë²„ê±°, HTML ë¯¸ë¦¬ë³´ê¸°, AI ìƒì„± |
| RisuAI cbs.ts | CBS ëª…ë ¹ì–´ êµ¬í˜„ ì°¸ì¡° |
| PresetManager | Diff ë¹„êµ ë¡œì§ |
| **OrganizeGod_v3** | ì±„íŒ…/ë¡œì–´ë¶/ì •ê·œì‹ CRUD, Hypa ë©”ëª¨ë¦¬ ê´€ë¦¬ UI |
| **AssetGod_v3** | ì—ì…‹ í´ë” ê´€ë¦¬, ê°¤ëŸ¬ë¦¬ ë·°, ë©”íƒ€ë°ì´í„° í™•ì¥ |

---

## 12. ê²°ë¡ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RisuStudio = RisuAI ê°œë°œìë¥¼ ìœ„í•œ IDE                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  í•µì‹¬ ì°¨ë³„ì :                                                               â”‚
â”‚  1. íŒŒì¼ ì™„ì „ ì§€ì› - .charx/.risum/.risup ì½ê¸°/ì“°ê¸°                        â”‚
â”‚  2. CBS/Regex/Trigger ì‹œë®¬ë ˆì´ì…˜ - RisuAI ì—†ì´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥                 â”‚
â”‚  3. Lua ëŸ°íƒ€ì„ ë‚´ì¥ - Trigger ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê°€ëŠ¥                           â”‚
â”‚  4. í†µí•© í…ŒìŠ¤íŠ¸ - í”„ë¦¬ì…‹+ìºë¦­í„°+ëª¨ë“ˆ ì¡°í•© ë¶„ì„                             â”‚
â”‚  5. AI ì¹œí™”ì  - Copy for AIë¡œ ì™¸ë¶€ AI í™œìš© ê·¹ëŒ€í™”                          â”‚
â”‚  6. ìœ íš¨ì„± ê²€ì¦ - í¸ì§‘ ê²°ê³¼ë¬¼ì´ RisuAIì—ì„œ ë¡œë“œ ê°€ëŠ¥í•œì§€ ì‹¤ì‹œê°„ ê²€ì¦       â”‚
â”‚  7. ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸ - RisuAI ìŠ¤í‚¤ë§ˆ ë³€ê²½ ìë™ ê°ì§€                           â”‚
â”‚                                                                             â”‚
â”‚  í†µí•© ê¸°ëŠ¥:                                                                 â”‚
â”‚  â€¢ ëª¨ë“ˆ ë§¤ë‹ˆì € - í¸ì§‘ UI, CBS í•˜ì´ë¼ì´íŠ¸, ìë™ì™„ì„±                          â”‚
â”‚  â€¢ Interface-Generation - Regex ë””ë²„ê±°, HTML ë¯¸ë¦¬ë³´ê¸°, AI ìƒì„±             â”‚
â”‚                                                                             â”‚
â”‚  UI ì „ëµ:                                                                   â”‚
â”‚  â€¢ í™”ë©´ ì „í™˜ ë°©ì‹ (ë¶„í•  ë·° ëŒ€ì‹ )                                            â”‚
â”‚  â€¢ ê° í™”ë©´ì´ 100% ê³µê°„ í™œìš©                                                 â”‚
â”‚                                                                             â”‚
â”‚  ê°œë°œ ì ‘ê·¼:                                                                 â”‚
â”‚  â€¢ Core ë¨¼ì € (í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ìˆœìˆ˜ ë¡œì§)                                      â”‚
â”‚  â€¢ ì ì§„ì  ê¸°ëŠ¥ ì¶”ê°€                                                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
